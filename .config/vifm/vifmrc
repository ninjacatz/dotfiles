" vim: filetype=vim :

" ---------------------------
" BASIC CONFIG
" ---------------------------
" Use xdg defaults (in the background) for all files:
filetype * xdg-open 2>/dev/null &
" Set default program to open files with if none set in xdg
" set vicmd=vim
" Enable mouse (requires version 0.13)
" set mouse=a
" Uses vifm operations instead of standard utilities like 'cp'
set syscalls
" Enable dotfiles
set dotfiles
" Case insensitive autocomplete
set caseoptions=p
" Set trash and trashdir
set trash
set trashdir="$HOME/.local/share/Trash/files"
" History max
set history=100
" Automatically resolve symbolic links on l or Enter.
set nofollowlinks
" Natural sort of (version) numbers within text.
set sortnumbers
" Maximum number of changes that can be undone.
set undolevels=100
" Use Vim's format of help file
set vimhelp
" Do not autorun executable files
set norunexec
" Ignore case unless capital letter
set ignorecase
set smartcase
" Don't highlight search results automatically
set nohlsearch
" Use increment searching (search while typing)
set incsearch
" Try to leave some space from cursor to upper/lower border in lists
set scrolloff=8
" Don't do too many requests to slow file systems
set slowfs=curlftpfs
" What should be saved automatically between vifm session
set vifminfo=chistory,shistory,phistory,fhistory,registers,bookmarks,bmarks
" Set vifm to use bashrc
set shell=/bin/bash\ --login
" Set path
let $PATH = system('echo $PATH')

" ---------------------------
" BOOKMARKS
" ---------------------------
mark h ~
mark H /mnt/ext1/backups/home/qq

mark c ~/.config
mark C /mnt/ext1/backups/home/qq/.config

mark s ~/.local/share
mark S /mnt/ext1/backups/home/qq/.local/share

mark t ~/.local/share/Trash/files

mark d /home/qq/Downloads
mark D /mnt/ext1/backups/home/qq/Downloads

mark u /home/qq/Documents
mark U /mnt/ext1/backups/home/qq/Documents

mark e /home/qq/Desktop
mark E /mnt/ext1/backups/home/qq/Desktop

mark v /home/qq/Videos
mark V /mnt/ext1/backups/home/qq/Videos

mark p /home/qq/Pictures
mark P /mnt/ext1/backups/home/qq/Pictures

mark m /home/qq/Music
mark M /mnt/ext1/backups/home/qq/Music

mark g /home/qq/Games
mark G /mnt/ext1/backups/home/qq/Games

mark 8 /home/qq/.local/bin/scripts
mark 9 /home/qq/Documents/antiX-guides
mark 0 /etc
nnoremap '[ :cd /mnt/part<CR>
nnoremap '] :cd /mnt/int<CR>
nnoremap '- :cd /mnt/ext1<CR>
nnoremap '= :cd /mnt/ext2<CR>

" ---------------------------
" THEMING
" ---------------------------
if $DISPLAY != ''
	colorscheme gruvbox
else
	colorscheme Default
endif
" Allow transparency
hi Win guibg=NONE ctermbg=NONE
hi Border guibg=NONE ctermbg=NONE
hi CmdLine guibg=NONE ctermbg=NONE
" Show directory preview by default
view!
" No wrapping in previews
set nowrap
" Set custom status line look
set statusline=
if $HOME == '/root' || $USER == 'root'
	if $HOME == '/root'
		set statusline+=(root)\ 
	else
		set statusline+=(sudo)\ 
	endif
endif
if $SSH_CONNECTION != ''
	set statusline+=(ssh)\ 
endif
set statusline+=%A\ %u:%g\ %E\ %T%=%d
" Show only filenames in view columns
windo set viewcolumns=-{name}..
" Time format. See man date or man strftime
set timefmt=%b\ %d\ %I:%M%P\ %Y
" Show list of matches on tab completion in command-line mode
set wildmenu
" Display completions in a form of popup
set wildstyle=popup
" Display suggestions in the following modes
set suggestoptions=normal,visual,view,otherpane,keys,marks,registers

" ---------------------------
" KEYMAPS
" ---------------------------
set timeoutlen=2000
noremap cw cW
noremap cW cw
noremap cc cW<c-u>
" noremap yd :!echo %d | xsel --clipboard --input<CR>:echo expand('%"d') "is yanked to clipboard"<CR>
" noremap yf :!echo %c:p | xsel --clipboard --input<CR>:echo expand('%"c:p') "is yanked to clipboard"<CR>

" Remove space keymapping
noremap <Space> <nop>
noremap <Space><Space> <nop>

" 1 -> 9
noremap <Space><BS> :source $HOME/.config/vifm/vifmrc<CR>

" Q -> P
noremap <Space>q :q<CR>
noremap <Space>Q :q!<CR>
noremap <Space>e :!nohup alacritty --config-file $HOME/.config/alacritty/vim.yml --class vim -e vim %d > /dev/null 2>&1 &<CR>
noremap <Space>t :!nohup alacritty --config-file $HOME/.config/alacritty/term.yml --working-directory %d > /dev/null 2>&1 &<CR>
noremap <Space>y :history<CR>
noremap <Space>i :help<Space>
noremap <Space>o :find *
noremap <Space>\ :cd<Space>

" A -> L
noremap <Space>s :sort<CR>
noremap <C-h> :tabprevious<CR>
noremap <C-l> :tabnext<CR>
noremap <Space>; :!
noremap <Space>: :sh<CR>
noremap <Space>' :marks<CR>
noremap <Space>" :registers<CR>

" Z -> M
noremap <Space>x :tabc<CR>
noremap <Space>m :tabnew<Space>
noremap <Space>M :tabnew **/
noremap <Space>, :norm<Space>
nnoremap <Space>. :%s///g<Left><Left><Left>
vnoremap <Space>. :s///g<Left><Left><Left>
noremap <Space>? :grep<Space>
