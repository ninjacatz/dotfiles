#!/bin/bash
set -eo pipefail
source_dir=$(cd -- "$(dirname -- "$0")" && pwd)
. "$source_dir/../qquser-check"

# files to exclude from git repo
exclude=(
	".vim/autoload"
	".vim/plugged"
	".vim/swap"
	".vim/viminfo"
	".config/mpv/watch_later"
	".config/sxhkd/acpi-lid"
	".config/vifm/vifminfo*"
	".config/vifm/vifm-help.txt"
)

# additional files to exclude from home server sync
exclude_server=(
	"/home/qq/README.md"
	".asoundrc"
	".config/alacritty"
	".config/bspwm"
	".config/mpv"
	".config/polybar"
	".config/sxhkd"
	".config/zathura"
)

rsync_exclude=()
for file in "${exclude[@]}"; do
	rsync_exclude+=("--exclude $file")
done
for file in "${exclude_server[@]}"; do
	rsync_exclude+=("--exclude $file")
done

rsync -avn "${rsync_exclude[@]}" ~ ~/.local
